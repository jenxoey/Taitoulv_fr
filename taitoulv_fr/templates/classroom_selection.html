<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>课堂选择</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        .classroom-image {
            max-width: 100%;
            height: auto;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        .result-content {
            text-align: center;
        }
        .selection-container {
            margin-top: 20px;
        }
        .form-container, .result-container {
            display: inline-block;
            vertical-align: top;
            width: 48%;
        }
        .result-container {
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="background-container">
        <img src="{{ url_for('static', filename='login1.jpg') }}" alt="Background Image 1">
        <img src="{{ url_for('static', filename='login2.jpg') }}" alt="Background Image 2">
        <img src="{{ url_for('static', filename='login3.jpg') }}" alt="Background Image 3">
        <img src="{{ url_for('static', filename='login4.jpg') }}" alt="Background Image 4">
    </div>
    <div class="container">
        <div class="selection-container">
            <div class="selection-header">
                <h2>课堂质量检测系统</h2>
            </div>
            <div class="form-container">
                <form action="/class_selection" method="POST">
                    <div class="input-group mb-3">
                        <label for="class_room">教室</label>
                        <select id="class_room" name="class_room" class="form-control" required>
                            {% for classroom in classrooms %}
                                <option value="{{ classroom.name }}">{{ classroom.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="input-group mb-3">
                        <label for="course_time">时间</label>
                        <select id="course_time" name="course_time" class="form-control" required>
                            {% for course_time in class_times %}
                                <option value="{{ course_time.time }}">{{ course_time.time }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <button type="submit" name="action" value="confirm" class="btn btn-primary btn-block">确认</button>
                    <button type="submit" name="action" value="show_result" class="btn btn-secondary btn-block">显示结果</button>
                    <a href="{{ url_for('class_selection') }}" class="btn btn-link">返回</a>
                </form>
            </div>
            <div class="result-container">
                {% if class_room and course_time %}
                    <div class="result-content mt-4">
                        <h3>教室: {{ class_room }}</h3>
                        <h3>时间: {{ course_time }}</h3>
                        {% if image %}
                            <img src="{{ url_for('faces', filename=image) }}" alt="Classroom Image" class="classroom-image">
                        {% else %}
                            <p>未找到教室图片</p>
                        {% endif %}
                        {% if head_up_rate is not none %}
                            <p>抬头率: {{ head_up_rate }}</p>
                        {% endif %}
                        {% if attendance_rate is not none %}
                            <p>到课率: {{ attendance_rate }}</p>
                        {% endif %}
                        {% if suggestion %}
                            <p>建议: {{ suggestion }}</p>
                        {% endif %}
                    </div>
                {% endif %}
            </div>
        </div>
    </div>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
